# 🍎 NSOperationQueue 와 GCD Queue 의 차이점을 설명하시오



### **<u>동기</u>**

- 코드가 "순차적"으로 실행되는 것.
- 동기적으로 실행될 때 파일 입출력 등 시간이 오래 걸리는 작업이 진행된다면, 해당 코드에서 모든 작업이 끝날 때까지 기다렸다가 다음 코드를 실행한다.

### **<u>비동기</u>**

- 코드가 순차적으로 실행되는 것을 보장하지 않는다. 비동기적으로 실행하는 코드가 있다면, 우선 다음 코드를 실행하고, 비동기 코드가 끝나면 콜백을 받아 실행한다.
- 스레드는 로우 레벨의 툴이기 때문에 개발자가 직접 제어하는 것은 까다롭다. iOS에서는 스레드를 직접 만드는 대신에 앱에서는 특정 태스크만 정의하고 시스템이 스레드를 관리한다.



### GCD(Grand Central Dispatch) Queue - DispatchQueue

- 앱의 기본 스레드 또는 백그라운드 스레드에서 작업 실행을 serial 또는 concurrent 방식으로 관리하는 개체
- 개발자가 실행할 작업을 생성하고 Dispatch Queue에 추가하면 GCD는 작업에 맞는 스레드를 자동으로 생성해서 실행하고 작업이 종료되면 해당 스레드 제거
- FIFO

- 블록 형태의 태스크가 들어온다
- Serial Queue(한번에 태스크 하나)와 Concurrent Queue(한번에 여러 태스크 처리)가 존재한다.
- 시스템에 의해 관리되는 스레드 풀에서 태스크가 실행되나, 메인 큐를 제외하고 어떤 태스크가 어느 스레드에서 실행되는 지는 보장하지 않는다.
- 동기적 / 비동기적으로 태스크를 처리할 수 있다.

- 앱 실행시 시스템에서 2개의 Queue를 만들어준다. 
  - Main queue 메인 스레드에서 사용되는 Serial queue로 모든 UI처리
  - Global Queue Concurrent Queue qos파라미터 제공. 병렬적으로 동시에 처리하기 때문에 작업 완료의 순서는 정할 수 없지만 우선적으로 일을 처리하게 할 수 있다.

### Async / sync (비동기 / 동기)

- 동기sync - 하나의 작업이 끝날 때까지 기다림,  비동기 async - 기다리지 않음

### Serial/Concurrent

- 한번에 실행하는 작업의 수



### NSOperation Queue

- Obj-C기반으로 만들어진 API
- 비교적 오버헤드가 있다
- 다양한 작업들 가운데 의존성 추가, 재사용, 취소, 중지 가능



# -> 답변

GCD

- 쉽고 편한 멀티 스레딩 처리를 위해 제공되는 api

- 작업이 복잡하지 않고 간단하게 처리



NSOperationQueue - 오버헤드 발생, 느리다. 시작되지 않은 작업을 취소할 수 있다. 

동시에 실행할 수 있는 operation의 최대 수를 지정할 수 있음.

